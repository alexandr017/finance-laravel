"use strict";function liteChart(t,e){if(void 0!=document.getElementById(t))throw Error("DOM id "+t+" is already exist.");this.id=t,panel=document.createElementNS("http://www.w3.org/2000/svg","svg"),panel.setAttribute("id",t),panel.setAttribute("class",t);var i={animate:{show:!this.isIE,duration:.5},axisX:{show:!0,color:"#e9edf1",width:2,value:"",minValue:0,maxValue:0},axisY:{show:!0,color:"#e9edf1",width:2,value:"",minValue:0,maxValue:0},eventCoord:{x:0,y:0},fill:"gradient",gridX:{show:!0,interval:0,fill:1,label:{show:!0},stroke:"#e9edf1",width:2,dasharray:"0 10.04",linecap:"round"},gridY:{show:!0,interval:0,fill:1,label:{show:!0},stroke:"#e9edf1",width:2,dasharray:"0 10.04",linecap:"round"},isIE:"Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=navigator.userAgent.toLowerCase().indexOf("msie"),labels:{show:!0,fontColor:"#c5c6d0",fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",list:null},legends:{list:null,map:null,table:{show:!0,position:{x:"center",y:370},direction:"horizontal"},fill:"#c5c6d0"},line:{width:3,style:"curve",shadow:!0,dasharray:null},padding:{top:55,right:15,bottom:40,left:20},panel:panel,point:{show:!0,radius:5,strokeWidth:5,stroke:"#ffffff"},tooltip:{show:!0,backgroundColor:"rgba(255, 255, 255, 0.8)",fontColor:"#000000",object:null},type:"Line",valueOnliteChart:{show:!1}};Object.assign(this,i,e)}function createElement(t,e){el=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)el.setAttribute(i,e[i]);return el}function createText(t,e,i,n,a,l,o,r){navigator.userAgent.toLowerCase();chart.isIE&&("hanging"==l?i+=n:"middle"==l&&(i+=n/2));var d=createElement("text",{id:t,x:e.toFixed(0),y:i.toFixed(0),"font-size":n,"text-anchor":a,fill:o});return chart.isIE||d.setAttribute("alignment-baseline",l),d.innerHTML=r,d.textContent=r,d}function getPath(t,e){return i=0,path="","straight"===t.line.style?e.forEach(function(t){0===i&&(path+=" M "),path+=t.x1.toFixed(0)+" "+t.y1.toFixed(0)+" ",++i,e.length===i&&(path+=t.x2.toFixed(0)+" "+t.y2.toFixed(0))}):"curve"===t.line.style&&e.forEach(function(t){0===i&&(path+="M "+t.x1.toFixed(0)+" "+t.y1.toFixed(0)),path+=" C "+t.cx1.toFixed(0)+" "+t.cy1.toFixed(0)+" "+t.cx2.toFixed(0)+" "+t.cy2.toFixed(0)+" "+t.x2.toFixed(0)+" "+t.y2.toFixed(0),++i}),path}liteChart.prototype.getWidth=function(){return this.panel.getBoundingClientRect().width},liteChart.prototype.getHeight=function(){return this.panel.getBoundingClientRect().height},liteChart.prototype.setLabels=function(t){this.labels.list=t},liteChart.prototype.addLegend=function(t){var e=null,i=null,n=null;null==this.legends.list&&(this.legends.list=[]),void 0==t.fill&&(e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),t.fill="rgba("+e+", "+i+", "+n+", 0.9)"),void 0==t.stroke&&(null!=e&&(e=0>(e-=10)?0:e,i=0>(i-=10)?0:i,n=0>(n-=10)?0:n),t.stroke="rgba("+e+", "+i+", "+n+", 1)"),this.legends.list.push(t),null==this.legends.map&&(this.legends.map=new Map),this.legends.map.set(t.name,t)},liteChart.prototype.removeLegend=function(t){var e=-1;if(null!=this.legends.list){for(var i=0;i<this.legends.list.length;i++)if(this.legends.list[i].name==t){e=i;break}e>-1&&(this.legends.list.splice(e,1),this.legends.map.delete(t))}},liteChart.prototype.getLegend=function(t){return this.legends.map.get(t)},liteChart.prototype.getMinValue=function(){var t=0,e=this.legends.list;this.values;return e.forEach(function(e){e.values.forEach(function(e){t>e&&(t=e)})}),t},liteChart.prototype.getMaxValue=function(){var t=0,e=this.legends.list;this.values;return e.forEach(function(e){e.values.forEach(function(e){e>t&&(t=e)})}),t},liteChart.prototype.showTooltip=function(t,e,i){var n=t.clientX,a=t.clientY;if(n!=i.eventCoord.x||a!=i.eventCoord.y){i.eventCoord.x=n,i.eventCoord.y=a;var l=e.getAttribute("legend"),o=i.getLegend(l),r=e.getAttribute("value"),d=e.getAttribute("label"),s=i.labels.fontSize,h=.5*s,p=h,u=s+2*h,c=2*s+3*h,g=0,f=0,v=0,b=3*s+4*h,x=i.tooltip.object;if(n-=100,a-=10,null==x||void 0==x){x=document.createElementNS("http://www.w3.org/2000/svg","g"),i.isIE||x.classList.add("tooltips");var m=createElement("rect",{id:i.id+"-tooltip",x:n,y:a,width:0,height:b,fill:i.tooltip.backgroundColor,stroke:"transparent",rx:5,ry:5});x.appendChild(m);var C=createText(i.id+"-tooltip-label-text",n+h,a+p,s,"start","hanging",i.tooltip.fontColor,d);x.appendChild(C);var y=createElement("rect",{id:i.id+"-tooltip-legend-mark",x:n+h,y:a+u,width:s,height:s,fill:o.fill,stroke:o.stroke});x.appendChild(y);var w=createText(i.id+"-tooltip-legend-name",n+(2*h+s),a+u,s,"start","hanging",i.tooltip.fontColor,l+": ");x.appendChild(w);var E=createText(i.id+"-tooltip-value",n+h,a+c,s,"start","hanging",i.tooltip.fontColor,r);x.appendChild(E),i.tooltip.object=x,i.panel.appendChild(i.tooltip.object),g=((f=1*y.getAttribute("width")+h+w.getBoundingClientRect().width)>(v=E.getBoundingClientRect().width)?f:v)+2*h,m.setAttribute("width",g)}else{var A=(x=i.tooltip.object).childNodes[0],k=x.childNodes[1],L=x.childNodes[2],S=x.childNodes[3],z=x.childNodes[4];A.setAttribute("x",n),A.setAttribute("y",a),k.setAttribute("x",n+h),k.setAttribute("y",a+p),k.innerHTML=d,L.setAttribute("x",n+h),L.setAttribute("y",a+u),L.setAttribute("fill",o.fill),L.setAttribute("stroke",o.stroke),S.setAttribute("x",n+(2*h+s)),S.setAttribute("y",a+u),S.innerHTML=l,z.setAttribute("x",n+h),z.setAttribute("y",a+c),z.innerHTML=r,g=((f=1*L.getAttribute("width")+h+S.getBoundingClientRect().width)>(v=z.getBoundingClientRect().width)?f:v)+2*h,A.setAttribute("width",g),A.setAttribute("x",0),A.setAttribute("y",0),(0>n||n+g>i.getWidth())&&(n=i.getWidth()-g,A.setAttribute("x",n),k.setAttribute("x",n+h),L.setAttribute("x",n+h),S.setAttribute("x",n+(2*h+s)),z.setAttribute("x",n+h),A.setAttribute("x",0),A.setAttribute("y",0)),(0>a||a+b>i.getHeight())&&(a=i.getHeight()-b,A.setAttribute("y",a),k.setAttribute("y",a+p),L.setAttribute("y",a+u),S.setAttribute("y",a+u),z.setAttribute("y",a+c),A.setAttribute("x",0),A.setAttribute("y",0))}}},liteChart.prototype.hideTooltip=function(t,e){var i=t.clientX,n=t.clientY;if(i!=e.eventCoord.x||n!=e.eventCoord.y){e.eventCoord.x=i,e.eventCoord.y=n;var a=e.tooltip.object;if(null!=a)for(var l=e.getWidth()+10,o=e.getHeight()+10,r=null,d=0;d<a.childNodes.length;d++)(r=a.childNodes[d]).setAttribute("x",l),r.setAttribute("y",o)}},liteChart.prototype.inject=function(t){t.appendChild(this.panel);var e=this,i=this.panel;i.style.width=t.clientWidth,i.style.height=t.clientHeight,window.addEventListener("resize",function(){i.style.width=t.clientWidth,i.style.height=t.clientHeight,e.tooltip.object=null,e.draw(!1)})},liteChart.prototype.restartAnimation=function(){for(var t=this.panel.getElementsByTagName("animate"),e=0;e<t.length;e++)t[e].beginElement()},liteChart.prototype.draw=function(t){var e="http://www.w3.org/2000/svg";for(void 0==t&&(t=!0);this.panel.firstChild;)this.panel.removeChild(this.panel.firstChild),this.tooltip.object=null;var n=function(t,e,i,n,a,l,o,r){var d=void 0==r?1:r,s=createElement("line",{id:t,x1:e.toFixed(0),y1:i.toFixed(0),x2:n.toFixed(0),y2:a.toFixed(0),stroke:o,"stroke-width":d});return s},a=function(t,e,i,n,a,l){path=getPath(t,i),-1!==e.indexOf("area")&&(first=i[Object.keys(i)[0]],path=path+" V"+(m-65)+" H"+first.x1.toFixed(0)+" L "+first.x1.toFixed(0)+" "+first.y1.toFixed(0),a=0);var o=void 0==l?"transparent":l,r=createElement("path",{id:e,d:path,fill:o,stroke:n,"stroke-width":a});return r},l=function(t,e,i,n,a,l,o){var r=createElement("rect",{id:t,x:e,y:i,width:n,height:a,fill:l,stroke:o});return r},o=function(t,e,i,n,a,l,o){var r=createElement("circle",{id:t,cx:e,cy:i,r:n,fill:a,stroke:l,"stroke-width":o});return r},r=function(t,e){var i=createElement("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),n=createElement("stop",{offset:"0%","stop-color":e,"stop-opacity":"0.1"}),a=createElement("stop",{offset:"100%","stop-color":e,"stop-opacity":"0"});return i.appendChild(n),i.appendChild(a),i},d=function(t,i,n,a,l){var o=document.createElementNS(e,"g");path=getPath(t,a);var r=createElement("path",{id:i,d:path,fill:"transparent",stroke:n,opacity:"0.5","stroke-width":t.line.width,filter:"url(#"+i+")"}),d=createElement("defs"),s=createElement("filter",{id:i,y:0,x:0}),p=createElement("feOffset",{result:"offOut",in:"SourceGraphic",dx:0,dy:7}),u=createElement("feGaussianBlur",{stdDeviation:5,in:"offOut"}),c=createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"});return o.appendChild(d),o.appendChild(r),t.animate.show&&(animation=h(t,r,l),r.appendChild(animation)),d.appendChild(s),s.appendChild(p),s.appendChild(u),s.appendChild(c),o},s=function(t,e,i,n,a){var l=createElement("animate",{attributeName:t,from:e,to:i,dur:n,fill:a});return l},h=function(t,e,i){return lineD0=getPath(t,i),lineD1=e.getAttribute("d"),e.setAttribute("d",lineD0),animation=s("d",lineD0,lineD1,t.animate.duration,"freeze"),animation},p=function(t){var e=/\B(?=(\d{3})+(?!\d))/g;return(""+t).replace(e,",")},u=function(t){if(t.gridX.label.show){var e=t.labels.fontSize/3,i=null,n=null,a=0,l=0;return"Line"==t.type&&(i=createText("tempTextForCalculateWidth",0,0,t.labels.fontSize,"end","middle",t.labels.fontColor,p(t.getMaxValue())),t.panel.appendChild(i),a=i.getBoundingClientRect().width,n=createText("tempTextForCalculateWidth",0,0,t.labels.fontSize,"end","middle",t.labels.fontColor,p(t.getMinValue())),t.panel.appendChild(n),a=a>(l=n.getBoundingClientRect().width)?a:l,t.panel.removeChild(i),t.panel.removeChild(n)),e+a+10+e}},c=function(t){var e=0;if(t.labels.show){var i=t.labels.fontSize/2;e=i+t.labels.fontSize+i}return e},g=function(t){var e=t.axisY.minValue,i=t.getMinValue();return 0==e&&0>i&&(e=i),e},f=function(t){var e=t.axisY.maxValue,i=t.getMaxValue();return 0==e&&i>0&&(e=i),e},v=function(t){var e=f(t)-g(t);return(t.getHeight()-t.padding.top-t.padding.bottom-c(t))/e},b=function(t){var e=t.getHeight()-t.padding.bottom-c(t),i=f(t),n=g(t);return 0>i?e=t.padding.top:0>n&&(e=t.padding.top+i*v(t)),e},x=this.getWidth(),m=this.getHeight(),C=this.padding.top,y=this.padding.bottom+c(this),w=this.padding.left+u(this),E=this.padding.right,A=x-w-E,k=m-C-y,L=function(t){if(t.axisX.show){var e=b(t),i=t.padding.left+u(t)-5,a=t.getWidth()-t.padding.right,l=n(t.id+"-axis-x",i,e,a,e,t.axisX.color,t.axisX.color,t.axisX.width);return t.isIE||l.classList.add("axis-x"),l}},S=function(t){if(t.axisY.show){var e=w,i=t.padding.top,a=t.getHeight()-t.padding.bottom-c(t)+5,l=n(t.id+"-axis-y",e,i,e,a,t.axisY.color,t.axisY.color,t.axisY.width);return t.isIE||l.classList.add("axis-y"),l}};"Line"==this.type&&(function(t){if(t.gridX.show){var i=g(t),n=f(t),a=t.gridX.interval;if(0==a){var l=n-i,o=Math.round(l/5),r=(""+o).length,d=Math.pow(10,r-1);a=Math.floor(o/d)*d}var s=Math.ceil(i/a)*a,h=0,u=0,b=null,m=null,C=t.labels.fontSize,y=(t.labels.fontFamily,t.labels.fontWeight,document.createElementNS(e,"g"));for(t.panel.appendChild(y);n>=s;)i>s?s+=a:(h=t.getHeight()-t.padding.bottom-c(t)-(s-i)*v(t),b=createElement("line",{id:t.id+"-grid-x-"+u,x1:w-5,y1:h,x2:x-E,y2:h,stroke:t.gridX.stroke,"stroke-width":t.gridX.width,"stroke-dasharray":t.gridX.dasharray,"stroke-linecap":t.gridX.linecap}),t.isIE||(b.classList.add("grid"),b.classList.add("grid-x")),y.appendChild(b),val=p(s),t.axisX.value&&(val+=" "+t.axisX.value),t.gridX.label.show&&(C/2>h||(id=t.id+"-grid-x-"+u+"-label",m=createText(id,w-10,h,C,"end","middle",t.labels.fontColor,val),t.isIE||m.classList.add("label"),y.appendChild(m))),s+=a,++u)}}(this),function(t){if(t.gridY.show){var i=t.labels.list.length,n=A/(3*i+1),a=null,l=0,o=t.padding.top,r=t.padding.top+k+5,d=document.createElementNS(e,"g");t.panel.appendChild(d);for(var s=0;i>s;s++)l=w+3*n/2+3*n*s+n/2,a=createElement("line",{id:t.id+"-grid-y-"+s,x1:l,y1:o,x2:l,y2:r,stroke:t.gridY.stroke,"stroke-width":t.gridY.width,"stroke-dasharray":t.gridY.dasharray,"stroke-linecap":t.gridY.linecap}),t.isIE||(a.classList.add("grid"),a.classList.add("grid-y")),d.appendChild(a)}}(this),function(t){if(t.labels.show){var i=t.labels.list.length,n=0;n=A/(3*i+1);var a=0,l=t.labels.list,o=0,r=0;o=0,r=t.padding.top+k+t.labels.fontSize/2,"middle","hanging";var d=document.createElementNS(e,"g");t.isIE||d.classList.add("labels"),t.panel.appendChild(d),l.forEach(function(e){o=w+(3*a+1+1)*n,val=e,t.axisY.value&&(val+=" "+t.axisY.value),e=createText(t.id+"-label-"+a,o,r,t.labels.fontSize,"middle","hanging",t.labels.fontColor,val),t.isIE||e.classList.add("label"),d.appendChild(e),++a})}}(this),function(t){var i=document.createElementNS(e,"g");t.isIE||i.classList.add("axes"),t.panel.appendChild(i),i.appendChild(L(t)),i.appendChild(S(t))}(this),function(t){if(void 0!=t.labels.list){var i=t.labels.list.length,n=A/(3*i+1),l="",o=0;t.legends.list.forEach(function(s){var p=0,u=0,c=0,f=0,x=null,m=0,C=null,y=null,E=[],A=[];if(s.values.forEach(function(e){var a=0;if(i>p){if(c=w+n/2+3*n/2+3*n*p,m=t.padding.top+k-(e-g(t))*v(t),null!=x&&m>=t.padding.top-.1&&m<=t.padding.top+k+.1){l=t.id+"-line-"+o+"-"+p;var r={x1:u,y1:x,cx1:(u+c)/2,cy1:x,x2:c,y2:m,cx2:(u+c)/2,cy2:m};if(E.push(r),t.animate.show){var d={x1:u,y1:b(t),cx1:(u+c)/2,cy1:b(t),x2:c,y2:b(t),cx2:(u+c)/2,cy2:b(t)};A.push(d)}}u=c,f=x,x=m,++p}a++}),C=a(t,"line-"+o,E,s.stroke,t.line.width,"transparent"),null!==t.line.dasharray&&C.setAttribute("stroke-dasharray",t.line.dasharray),t.isIE||(C.classList.add("line"),C.classList.add("line-"+o)),t.animate.show&&(y=h(t,C,A),C.appendChild(y)),t.panel.appendChild(C),"gradient"===t.fill||"origin"===t.fill){var L=document.createElementNS(e,"g");t.panel.appendChild(L),"gradient"===t.fill&&(linear=r(s.stroke,s.stroke),L.appendChild(linear)),fill="origin"===t.fill?s.stroke:"url(#"+s.stroke+")",grad=a(t,"area-"+o,E,s.stroke,t.line.width,fill),t.isIE||(grad.classList.add("gradient"),grad.classList.add("gradient-"+o)),t.animate.show&&(grads=a(t,"area-"+o,E,s.stroke,t.line.width,fill),y=h(t,grads,A),grad.appendChild(y)),L.appendChild(grad)}1==t.line.shadow&&(blur=d(t,"elem-"+o+"-blur",s.stroke,E,A),t.panel.appendChild(blur)),++o})}}(this),function(t){if(void 0!=t.labels.list){var i=t.labels.list.length,n=A/(3*i+1),a="",l=0;t.legends.list.forEach(function(r){var d=0,h=0,u=0,c=null,f=null,x=0,m=t.padding.top+k-t.labels.fontSize/3,C=document.createElementNS(e,"g");t.panel.appendChild(C),r.values.forEach(function(e){i>d&&(h=w+n/2+3*n/2+3*n*d,u=t.padding.top+k-(e-g(t))*v(t),!t.point.show||u<t.padding.top-.1||u>t.padding.top+k+.1||(a=t.id+"-line-point-"+l+"-"+d,stroke=null===t.point.stroke?r.stroke:t.point.stroke,(c=o(a,h,u,t.point.radius,r.stroke,stroke,t.point.strokeWidth)).style.cursor="pointer",t.isIE||c.classList.add("point"),t.animate.show&&(c.setAttribute("cy",b(t)),pointMove=s("cy",b(t),u,t.animate.duration,"freeze"),c.appendChild(pointMove),c.setAttribute("r",0),pointMove=s("r",0,t.point.radius,t.animate.duration,"freeze"),c.appendChild(pointMove)),C.appendChild(c),t.tooltip.show&&(c.setAttribute("legend",r.name),c.setAttribute("value",p(e)),c.setAttribute("label",t.labels.list[d]),c.addEventListener("mouseover",function(e){t.showTooltip(e,this,t)}),c.addEventListener("mousemove",function(e){t.showTooltip(e,this,t)}),c.addEventListener("mouseout",function(e){t.hideTooltip(e,t)}))),t.valueOnliteChart.show&&(a=t.id+"-line-"+l+"-"+d+"-value",x=u-t.point.radius-t.labels.fontSize/3,(x=x>m?m:x)>t.labels.fontSize&&(f=createText(a,h,x,t.labels.fontSize,"middle","baseline",t.labels.fontColor,p(e)),t.isIE||(f.classList.add("line-value"),f.classList.add("line-value-"+l)),t.animate.show&&(f.setAttribute("y",b(t)),pointMove=s("y",b(t),x,t.animate.duration,"freeze"),f.appendChild(pointMove),f.setAttribute("font-size",0),pointMove=s("font-size",0,t.labels.fontSize,t.animate.duration,"freeze"),f.appendChild(pointMove)),C.appendChild(f))),++d)}),++l})}}(this),function(t){if(t.legends.table.show){var a=t.legends.table.position.x,o=!1,r=!1;"center"==a?(o=!0,a=0):"right"==a&&(r=!0,a=0);var d=t.legends.table.position.y,s=null,h=null,p=0,u=0,c=.5*t.labels.fontSize,g=0,f=0,v=0,b=[];a+=c;var x=t.panel,m=t.labels,C=t.legends.table,y=document.createElementNS(e,"g");if(t.isIE||y.classList.add("legends"),x.appendChild(y),t.legends.list.forEach(function(e){"vertical"==C.direction?(u=d+c+3*c*p,s=l(id+"-mark-"+p,a,u,m.fontSize,m.fontSize,e.fill,e.stroke),y.appendChild(s),b.push(s),h=createText(id+"-text-"+p,a+c+m.fontSize,u,m.fontSize,"start","hanging",C.fontColor,e.name),y.appendChild(h),b.push(h),t.isIE||h.classList.add("legend"),g=c+m.fontSize+c+h.getBoundingClientRect().width,f=f>g?f:g,v+=c+m.fontSize):"horizontal"==C.direction&&(u=d+c+3*c*0,s=n(id+"-mark-"+p,a,u+6,a+12,u+6,e.fill,e.stroke,4),y.appendChild(s),b.push(s),a+=m.fontSize+c,h=createText(id+"-text-"+p,a,u,m.fontSize,"start","hanging",C.fontColor,e.name),y.appendChild(h),b.push(h),t.isIE||h.classList.add("legend"),a+=h.getBoundingClientRect().width+c,g+=c+m.fontSize+c+h.getBoundingClientRect().width,f=f>g?f:g,v=1*(c+m.fontSize)),++p}),o){var w=(t.getWidth()-f-c)/2;i=0,b.forEach(function(t){if("line"===t.nodeName){var e=1*t.getAttribute("x1")+w+i,n=1*t.getAttribute("x2")+w+i;t.setAttribute("x1",Math.round(e)),t.setAttribute("x2",Math.round(n))}else if("text"===t.nodeName){var a=1*t.getAttribute("x");t.setAttribute("x",a+w+i),i+=20}})}else if(r){var E=t.getWidth()-f-2*c;b.forEach(function(t){var e=1*t.getAttribute("x");t.setAttribute("x",e+E)})}}}(this)),t&&this.restartAnimation(this)};